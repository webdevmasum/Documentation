ğŸ›’ Scenario: E-commerce Order Management

ğŸ”¹ User ekta order place korbe.
ğŸ”¹ Total price calculation automatically hobe.
ğŸ”¹ Encapsulation ensure korar jonno private properties use kora hobe.
ğŸ”¹ protected properties use korbo jate model data properly maintain hoy.
ğŸ›  Step 1: Order Model (Encapsulation Maintain Korbo)

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Order extends Model
{
    protected $fillable = ['user_id', 'status'];
    private $totalPrice = 0; // Private rakhlam jate directly access na hoy

    public function setTotalPrice($amount) {
        if ($amount < 0) {
            throw new \Exception("Total price cannot be negative.");
        }
        $this->totalPrice = $amount;
    }

    public function getTotalPrice() {
        return $this->totalPrice;
    }
}

ğŸ”¹ Explanation:

âœ… protected $fillable = ['user_id', 'status']; â†’ Jate only specific field gulo fillable thake.
âœ… private $totalPrice = 0; â†’ totalPrice directly modify kora jabe na.
âœ… setTotalPrice($amount) â†’ Negative price prevent korte parbo.
âœ… getTotalPrice() â†’ Safe way te price retrieve korte parbo.
ğŸ›  Step 2: Order Controller (Object Create Kore Use Korbo)

namespace App\Http\Controllers;

use App\Models\Order;
use Illuminate\Http\Request;

class OrderController extends Controller
{
    public function createOrder(Request $request)
    {
        $order = new Order();
        $order->user_id = auth()->id();
        $order->status = 'pending';

        // Total Price Set with Encapsulation
        $totalAmount = $this->calculateTotal($request->items);
        $order->setTotalPrice($totalAmount); // Encapsulation follow korchi

        $order->save();

        return response()->json([
            'message' => 'Order placed successfully!',
            'total_price' => $order->getTotalPrice()
        ]);
    }

    private function calculateTotal($items)
    {
        $total = 0;
        foreach ($items as $item) {
            $total += $item['price'] * $item['quantity'];
        }
        return $total;
    }
}

ğŸ›  Step 3: Frontend theke API Call

Jodi Postman ba Frontend theke order place korte chai, tahole ei API call hobe:

POST /api/orders
Content-Type: application/json
Authorization: Bearer {user_token}

{
    "items": [
        {"price": 500, "quantity": 2},
        {"price": 300, "quantity": 1}
    ]
}

ğŸ”¹ Backend Calculation:

    500 * 2 + 300 * 1 = 1300
    setTotalPrice(1300) diye encapsulation follow kore save korbe.
    getTotalPrice() diye safe way te retrieve korbo.

ğŸ”¹ Response JSON (Backend theke frontend e send hobe):

{
    "message": "Order placed successfully!",
    "total_price": 1300
}

ğŸš€ Real-Life Project e Encapsulation er Benefit

1ï¸âƒ£ ğŸ”’ Security: totalPrice direct modify kora jabe na.
2ï¸âƒ£ âœ… Maintainability: Order price calculation centralized rakha gese.
3ï¸âƒ£ ğŸ›  Scalability: Easily aro logic add kora jabe (e.g., discount, tax).
4ï¸âƒ£ ğŸš€ Laravel Best Practice: Model er sensitive data protected rakha hoyeche.